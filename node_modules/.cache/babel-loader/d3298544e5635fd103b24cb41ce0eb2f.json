{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abdomostafa/Finance-Tracker/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/abdomostafa/Finance-Tracker/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/abdomostafa/Finance-Tracker/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{auth}from'../firebase/config';import useAuthcontext from'./useAuthcontext';export var useLogin=function useLogin(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCancelled=_useState2[0],setIsCancelled=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPending=_useState6[0],setIsPending=_useState6[1];var _useAuthcontext=useAuthcontext(),dispatch=_useAuthcontext.dispatch;var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setError(null);setIsPending(true);_context.prev=2;_context.next=5;return auth.signInWithEmailAndPassword(email,password);case 5:res=_context.sent;// dispatch login action\ndispatch({type:'LOGIN',payload:res.user});if(!isCancelled){setIsPending(false);setError(null);}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);if(!isCancelled){setError(_context.t0.message);setIsPending(false);}case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function login(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){return function(){return setIsCancelled(true);};},[]);return{login:login,isPending:isPending,error:error};};","map":{"version":3,"sources":["/Users/abdomostafa/Finance-Tracker/frontend/src/hooks/useLogin.js"],"names":["useState","useEffect","auth","useAuthcontext","useLogin","isCancelled","setIsCancelled","error","setError","isPending","setIsPending","dispatch","login","email","password","signInWithEmailAndPassword","res","type","payload","user","message"],"mappings":"meAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAAQC,IAAR,KAAmB,oBAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CAEA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CAC5B,cAAsCJ,QAAQ,CAAC,KAAD,CAA9C,wCAAOK,WAAP,eAAoBC,cAApB,eACA,eAA0BN,QAAQ,CAAC,IAAD,CAAlC,yCAAOO,KAAP,eAAcC,QAAd,eACA,eAAkCR,QAAQ,CAAC,KAAD,CAA1C,yCAAOS,SAAP,eAAkBC,YAAlB,eACA,oBAAqBP,cAAc,EAAnC,CAAQQ,QAAR,iBAAQA,QAAR,CAEA,GAAMC,CAAAA,KAAK,0FAAG,iBAAOC,KAAP,CAAcC,QAAd,0HACZN,QAAQ,CAAC,IAAD,CAAR,CACAE,YAAY,CAAC,IAAD,CAAZ,CAFY,sCAMQR,CAAAA,IAAI,CAACa,0BAAL,CAAgCF,KAAhC,CAAuCC,QAAvC,CANR,QAMJE,GANI,eAQV;AACAL,QAAQ,CAAC,CAAEM,IAAI,CAAE,OAAR,CAAiBC,OAAO,CAAEF,GAAG,CAACG,IAA9B,CAAD,CAAR,CAEA,GAAI,CAACd,WAAL,CAAkB,CAChBK,YAAY,CAAC,KAAD,CAAZ,CACAF,QAAQ,CAAC,IAAD,CAAR,CACD,CAdS,iFAiBV,GAAI,CAACH,WAAL,CAAkB,CAChBG,QAAQ,CAAC,YAAIY,OAAL,CAAR,CACAV,YAAY,CAAC,KAAD,CAAZ,CACD,CApBS,qEAAH,kBAALE,CAAAA,KAAK,gDAAX,CAwBAX,SAAS,CAAC,UAAM,CACd,MAAO,kBAAMK,CAAAA,cAAc,CAAC,IAAD,CAApB,EAAP,CACD,CAFQ,CAEN,EAFM,CAAT,CAIA,MAAO,CAAEM,KAAK,CAALA,KAAF,CAASH,SAAS,CAATA,SAAT,CAAoBF,KAAK,CAALA,KAApB,CAAP,CACD,CAnCM","sourcesContent":["import { useState, useEffect } from 'react'\nimport {auth} from '../firebase/config'\nimport useAuthcontext from './useAuthcontext'\n\nexport const useLogin = () => {\n  const [isCancelled, setIsCancelled] = useState(false)\n  const [error, setError] = useState(null)\n  const [isPending, setIsPending] = useState(false)\n  const { dispatch } = useAuthcontext()\n\n  const login = async (email, password) => {\n    setError(null)\n    setIsPending(true)\n  \n    try {\n      // login\n      const res = await auth.signInWithEmailAndPassword(email, password)\n        \n      // dispatch login action\n      dispatch({ type: 'LOGIN', payload: res.user })\n\n      if (!isCancelled) {\n        setIsPending(false)\n        setError(null)\n      }\n    } \n    catch(err) {\n      if (!isCancelled) {\n        setError(err.message)\n        setIsPending(false)\n      }\n    }\n  }\n\n  useEffect(() => {\n    return () => setIsCancelled(true)\n  }, [])\n\n  return { login, isPending, error }\n}"]},"metadata":{},"sourceType":"module"}