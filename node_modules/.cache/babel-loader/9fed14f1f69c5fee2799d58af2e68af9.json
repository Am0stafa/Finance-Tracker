{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abdomostafa/Finance-Tracker/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/abdomostafa/Finance-Tracker/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/abdomostafa/Finance-Tracker/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import{auth}from'../firebase/config';import useAuthcontext from'./useAuthcontext';var useSignup=function useSignup(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isPending=_useState4[0],setIsPending=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isCancelled=_useState6[0],setIsCancelled=_useState6[1];var _useAuthcontext=useAuthcontext(),dispatch=_useAuthcontext.dispatch;var signup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password,displayName){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setError(null);//^ reset the error each time we signup\nsetIsPending(true);_context.prev=2;_context.next=5;return auth.createUserWithEmailAndPassword(email,password);case 5:res=_context.sent;dispatch({type:'LOGIN',payload:res.user});if(res){_context.next=9;break;}throw new Error('Failed to create a user');case 9:_context.next=11;return res.user.updateProfile({displayName:displayName});case 11:if(!isCancelled)setIsPending(false);_context.next=19;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);console.log(error);setError(_context.t0.message);setIsPending(false);case 19:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));return function signup(_x,_x2,_x3){return _ref.apply(this,arguments);};}();useEffect(function(){return function(){return setIsCancelled(false);};//! if we navigate away this fire and we dont want to update the local state if this happens\n},[]);return{error:error,isPending:isPending,signup:signup};};export default useSignup;","map":{"version":3,"sources":["/Users/abdomostafa/Finance-Tracker/frontend/src/hooks/useSignup.js"],"names":["useEffect","useState","auth","useAuthcontext","useSignup","error","setError","isPending","setIsPending","isCancelled","setIsCancelled","dispatch","signup","email","password","displayName","createUserWithEmailAndPassword","res","type","payload","user","Error","updateProfile","console","log","message"],"mappings":"meAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAAQC,IAAR,KAAmB,oBAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpB,cAAyBH,QAAQ,CAAC,IAAD,CAAjC,wCAAOI,KAAP,eAAaC,QAAb,eACA,eAAiCL,QAAQ,CAAC,KAAD,CAAzC,yCAAOM,SAAP,eAAiBC,YAAjB,eACA,eAAsCP,QAAQ,CAAC,KAAD,CAA9C,yCAAOQ,WAAP,eAAoBC,cAApB,eAEA,oBAAmBP,cAAc,EAAjC,CAAOQ,QAAP,iBAAOA,QAAP,CAEA,GAAMC,CAAAA,MAAM,0FAAG,iBAAOC,KAAP,CAAaC,QAAb,CAAsBC,WAAtB,0HACXT,QAAQ,CAAC,IAAD,CAAR,CAAe;AACfE,YAAY,CAAC,IAAD,CAAZ,CAFW,sCAKWN,CAAAA,IAAI,CAACc,8BAAL,CAAoCH,KAApC,CAA0CC,QAA1C,CALX,QAKDG,GALC,eAOPN,QAAQ,CAAC,CAACO,IAAI,CAAC,OAAN,CAAcC,OAAO,CAACF,GAAG,CAACG,IAA1B,CAAD,CAAR,CAPO,GAQHH,GARG,8BASG,IAAII,CAAAA,KAAJ,CAAU,yBAAV,CATH,+BAYDJ,CAAAA,GAAG,CAACG,IAAJ,CAASE,aAAT,CAAuB,CAAEP,WAAW,CAAXA,WAAF,CAAvB,CAZC,SAcP,GAAI,CAACN,WAAL,CACKD,YAAY,CAAC,KAAD,CAAZ,CAfE,iFAmBPe,OAAO,CAACC,GAAR,CAAYnB,KAAZ,EACAC,QAAQ,CAAC,YAAImB,OAAL,CAAR,CACAjB,YAAY,CAAC,KAAD,CAAZ,CArBO,qEAAH,kBAANI,CAAAA,MAAM,oDAAZ,CA2BAZ,SAAS,CAAC,UAAM,CACZ,MAAO,kBAAMU,CAAAA,cAAc,CAAC,KAAD,CAApB,EAAP,CAAmC;AACtC,CAFQ,CAEN,EAFM,CAAT,CAIA,MAAO,CAACL,KAAK,CAALA,KAAD,CAAOE,SAAS,CAATA,SAAP,CAAiBK,MAAM,CAANA,MAAjB,CAAP,CACH,CAvCD,CAyCA,cAAeR,CAAAA,SAAf","sourcesContent":["import { useEffect, useState } from 'react'\nimport {auth} from '../firebase/config'\nimport useAuthcontext from './useAuthcontext'\n\nconst useSignup = () => {\n    const [error,setError] = useState(null)\n    const [isPending,setIsPending] = useState(false)\n    const [isCancelled, setIsCancelled] = useState(false)\n\n    const {dispatch} = useAuthcontext()\n    \n    const signup = async (email,password,displayName) => {\n        setError(null) //^ reset the error each time we signup\n        setIsPending(true)\n        \n        try {\n            const res = await auth.createUserWithEmailAndPassword(email,password) \n  \n            dispatch({type:'LOGIN',payload:res.user})\n            if(!res){\n                throw new Error('Failed to create a user')\n            }\n            //! after creating the user we want to tap in that user and update his profile and add this name\n            await res.user.updateProfile({ displayName })\n                    \n            if (!isCancelled)\n                 setIsPending(false)\n    \n            \n        } catch (err) {\n            console.log(error)\n            setError(err.message)\n            setIsPending(false)\n\n        }\n        \n    }\n    \n    useEffect(() => {    \n        return () => setIsCancelled(false) //! if we navigate away this fire and we dont want to update the local state if this happens\n    }, []);\n    \n    return {error,isPending,signup}\n}\n\nexport default useSignup"]},"metadata":{},"sourceType":"module"}