{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abdomostafa/Finance-Tracker/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/abdomostafa/Finance-Tracker/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/abdomostafa/Finance-Tracker/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import{auth}from'../firebase/config';import useAuthcontext from'./useAuthcontext';var useLogout=function useLogout(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCancelled=_useState2[0],setIsCancelled=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPending=_useState6[0],setIsPending=_useState6[1];var _useAuthcontext=useAuthcontext(),dispatch=_useAuthcontext.dispatch;var logout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setError(null);setIsPending(true);_context.prev=2;_context.next=5;return auth.signOut();case 5:dispatch({type:'LOGOUT'});if(!isCancelled)setIsPending(false);_context.next=14;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.log(error);setError(_context.t0.message);setIsPending(false);case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function logout(){return _ref.apply(this,arguments);};}();useEffect(function(){return function(){return setIsCancelled(false);};//! if we navigate away this fire\n},[]);return{logout:logout,error:error,isPending:isPending};};export default useLogout;","map":{"version":3,"sources":["/Users/abdomostafa/Finance-Tracker/frontend/src/hooks/useLogout.js"],"names":["useEffect","useState","auth","useAuthcontext","useLogout","isCancelled","setIsCancelled","error","setError","isPending","setIsPending","dispatch","logout","signOut","type","console","log","message"],"mappings":"meAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,IAAT,KAAqB,oBAArB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,cAAsCH,QAAQ,CAAC,KAAD,CAA9C,wCAAOI,WAAP,eAAoBC,cAApB,eACA,eAA0BL,QAAQ,CAAC,IAAD,CAAlC,yCAAOM,KAAP,eAAcC,QAAd,eACA,eAAkCP,QAAQ,CAAC,KAAD,CAA1C,yCAAOQ,SAAP,eAAkBC,YAAlB,eACA,oBAAmBP,cAAc,EAAjC,CAAOQ,QAAP,iBAAOA,QAAP,CAGA,GAAMC,CAAAA,MAAM,0FAAG,mIACbJ,QAAQ,CAAC,IAAD,CAAR,CACAE,YAAY,CAAC,IAAD,CAAZ,CAFa,sCAKHR,CAAAA,IAAI,CAACW,OAAL,EALG,QAMTF,QAAQ,CAAC,CAACG,IAAI,CAAC,QAAN,CAAD,CAAR,CAGA,GAAI,CAACT,WAAL,CACIK,YAAY,CAAC,KAAD,CAAZ,CAVK,+EAcTK,OAAO,CAACC,GAAR,CAAYT,KAAZ,EACAC,QAAQ,CAAC,YAAIS,OAAL,CAAR,CACAP,YAAY,CAAC,KAAD,CAAZ,CAhBS,oEAAH,kBAANE,CAAAA,MAAM,0CAAZ,CAqBEZ,SAAS,CAAC,UAAM,CACZ,MAAO,kBAAMM,CAAAA,cAAc,CAAC,KAAD,CAApB,EAAP,CAAmC;AACtC,CAFQ,CAEN,EAFM,CAAT,CAKF,MAAO,CAAEM,MAAM,CAANA,MAAF,CAAUL,KAAK,CAALA,KAAV,CAAiBE,SAAS,CAATA,SAAjB,CAAP,CAED,CAnCD,CAqCA,cAAeL,CAAAA,SAAf","sourcesContent":["import { useEffect, useState } from 'react'\nimport { auth } from '../firebase/config'\nimport useAuthcontext from './useAuthcontext'\n\nconst useLogout = () => {\n  const [isCancelled, setIsCancelled] = useState(false)\n  const [error, setError] = useState(null)\n  const [isPending, setIsPending] = useState(false)\n  const {dispatch} = useAuthcontext()\n\n    \n  const logout = async () => {\n    setError(null)\n    setIsPending(true)\n\n    try {\n        await auth.signOut()\n        dispatch({type:'LOGOUT'})\n\n        \n        if (!isCancelled)\n            setIsPending(false)\n        \n        \n    }catch (err) {\n        console.log(error)\n        setError(err.message)\n        setIsPending(false)\n    }\n    \n  }\n\n    useEffect(() => {    \n        return () => setIsCancelled(false) //! if we navigate away this fire\n    }, []);\n \n\n  return { logout, error, isPending }\n\n}\n\nexport default useLogout"]},"metadata":{},"sourceType":"module"}