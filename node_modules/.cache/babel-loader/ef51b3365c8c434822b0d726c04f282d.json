{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState, useRef } from \"react\";\nimport { db } from '../firebase/config';\n\nconst useCollection = (collection, _query, _orderBy) => {\n  _s();\n\n  const [documents, setDocuments] = useState([]);\n  const [error, setError] = useState(null); //! if we don't use a ref --> infinite loop in useEffect\n  //! _query is an array and is \"different\" on every function call\n\n  const query = useRef(_query).current;\n  const orderBy = useRef(_orderBy).current;\n  useEffect(() => {\n    let currentCollection = db.collection(collection);\n    if (query) currentCollection = currentCollection.where(...query);\n    if (orderBy) ref = ref.orderBy(...orderBy);\n    const unsubscribe = currentCollection.onSnapshot(snapshot => {\n      let results = [];\n      snapshot.docs.forEach(doc => {\n        results.push({\n          id: doc.id,\n          ...doc.data()\n        });\n      }); // update state\n\n      setDocuments(results);\n      setError(null);\n    }, error => {\n      console.log(error);\n      setError('could not fetch the data');\n    }); //* unsubscribe on unmount\n\n    return () => unsubscribe();\n  }, [collection, query, orderBy]);\n  return {\n    documents,\n    error\n  };\n};\n\n_s(useCollection, \"RDW1mtKDRiJGUPUjzHmjrVuUEog=\");\n\nexport default useCollection;","map":{"version":3,"sources":["/Users/abdomostafa/Finance-Tracker/frontend/src/hooks/useCollection.js"],"names":["useEffect","useState","useRef","db","useCollection","collection","_query","_orderBy","documents","setDocuments","error","setError","query","current","orderBy","currentCollection","where","ref","unsubscribe","onSnapshot","snapshot","results","docs","forEach","doc","push","id","data","console","log"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,EAA8BC,MAA9B,QAA4C,OAA5C;AACA,SAAQC,EAAR,QAAiB,oBAAjB;;AAGA,MAAMC,aAAa,GAAG,CAACC,UAAD,EAAaC,MAAb,EAAqBC,QAArB,KAAkC;AAAA;;AACpD,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BR,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACS,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC,IAAD,CAAlC,CAFoD,CAIpD;AACA;;AACA,QAAMW,KAAK,GAAGV,MAAM,CAACI,MAAD,CAAN,CAAeO,OAA7B;AACA,QAAMC,OAAO,GAAGZ,MAAM,CAACK,QAAD,CAAN,CAAiBM,OAAjC;AAEAb,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIe,iBAAiB,GAAGZ,EAAE,CAACE,UAAH,CAAcA,UAAd,CAAxB;AACA,QAAIO,KAAJ,EAAWG,iBAAiB,GAAGA,iBAAiB,CAACC,KAAlB,CAAwB,GAAGJ,KAA3B,CAApB;AAEX,QAAIE,OAAJ,EAAgBG,GAAG,GAAGA,GAAG,CAACH,OAAJ,CAAY,GAAGA,OAAf,CAAN;AAGhB,UAAMI,WAAW,GAAGH,iBAAiB,CAACI,UAAlB,CAA8BC,QAAD,IAAc;AAC7D,UAAIC,OAAO,GAAG,EAAd;AACAD,MAAAA,QAAQ,CAACE,IAAT,CAAcC,OAAd,CAAsBC,GAAG,IAAI;AAC3BH,QAAAA,OAAO,CAACI,IAAR,CAAa;AAACC,UAAAA,EAAE,EAAEF,GAAG,CAACE,EAAT;AAAa,aAAGF,GAAG,CAACG,IAAJ;AAAhB,SAAb;AACD,OAFD,EAF6D,CAK7D;;AACAlB,MAAAA,YAAY,CAACY,OAAD,CAAZ;AACAV,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,KARmB,EAQhBD,KAAD,IAAW;AACVkB,MAAAA,OAAO,CAACC,GAAR,CAAYnB,KAAZ;AACAC,MAAAA,QAAQ,CAAC,0BAAD,CAAR;AACH,KAXmB,CAApB,CAPY,CAoBZ;;AACA,WAAO,MAAMO,WAAW,EAAxB;AACH,GAtBQ,EAsBP,CAACb,UAAD,EAAYO,KAAZ,EAAkBE,OAAlB,CAtBO,CAAT;AAyBA,SAAO;AAAEN,IAAAA,SAAF;AAAaE,IAAAA;AAAb,GAAP;AACH,CAnCD;;GAAMN,a;;AAqCN,eAAeA,aAAf","sourcesContent":["import { useEffect, useState, useRef } from \"react\"\nimport {db} from '../firebase/config'\n\n\nconst useCollection = (collection, _query, _orderBy) => {\n    const [documents, setDocuments] = useState([])\n    const [error, setError] = useState(null)\n    \n    //! if we don't use a ref --> infinite loop in useEffect\n    //! _query is an array and is \"different\" on every function call\n    const query = useRef(_query).current\n    const orderBy = useRef(_orderBy).current\n  \n    useEffect(() => {\n        let currentCollection = db.collection(collection)\n        if (query) currentCollection = currentCollection.where(...query)\n        \n        if (orderBy)    ref = ref.orderBy(...orderBy)\n        \n\n        const unsubscribe = currentCollection.onSnapshot((snapshot) => {\n          let results = []\n          snapshot.docs.forEach(doc => {\n            results.push({id: doc.id, ...doc.data()})\n          });\n          // update state\n          setDocuments(results)\n          setError(null)\n        }, (error) => {\n            console.log(error)\n            setError('could not fetch the data')\n        })\n          \n        //* unsubscribe on unmount\n        return () => unsubscribe()\n    },[collection,query,orderBy])\n    \n    \n    return { documents, error }\n}\n\nexport default useCollection"]},"metadata":{},"sourceType":"module"}