{"version":3,"sources":["pages/home/Home.module.css","components/Navbar.module.css","pages/login/Login.module.css","pages/signup/Signup.module.css","firebase/config.js","context/AuthContext.js","hooks/useAuthcontext.js","hooks/useFirestore.js","components/TransactionForm.jsx","pages/home/TransactionList.jsx","hooks/useCollection.js","pages/home/Home.jsx","pages/login/Login.jsx","hooks/useLogin.js","hooks/useSignup.js","pages/signup/Signup.jsx","hooks/useLogout.js","components/Navbar.jsx","App.js","index.js"],"names":["module","exports","console","log","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","timestamp","Timestamp","init","user","authIsReady","name","authReducer","state","action","type","payload","AuthContext","createContext","AuthProvider","children","useReducer","dispatch","useEffect","unsub","onAuthStateChanged","Provider","value","useAuthcontext","context","useContext","Error","initialState","document","isPending","error","success","firestoreReducer","useFirestore","collection","useState","isCancelled","setIsCancelled","response","dispatchIfNotCancelled","currentCollection","addDocument","data","a","createdAt","fromDate","Date","add","addedDocument","message","deleteDocument","id","doc","delete","TransactionForm","uid","setName","amount","setAmount","handleSubmit","e","preventDefault","onSubmit","required","onChange","target","TransactionList","transactions","className","styles","map","transaction","onClick","useCollection","_query","_orderBy","documents","setDocuments","setError","query","useRef","current","orderBy","where","unsubscribe","onSnapshot","snapshot","results","docs","forEach","push","Home","container","content","sidebar","Login","email","setEmail","password","setPassword","setIsPending","login","signInWithEmailAndPassword","res","useLogin","disabled","useSignup","signup","displayName","createUserWithEmailAndPassword","updateProfile","Signup","setDisplayName","useLogout","logout","signOut","Navbar","navbar","title","to","App","exact","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9f8604f4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Home_container__3bftD\",\"content\":\"Home_content__18qU0\",\"sidebar\":\"Home_sidebar__21xz5\",\"transactions\":\"Home_transactions__3_tqr\",\"name\":\"Home_name__4a_Tj\",\"amount\":\"Home_amount__1MW_9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Navbar_navbar__31-FB\",\"title\":\"Navbar_title__2CGsW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login-form\":\"Login_login-form__1NBYb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"signup-form\":\"Signup_signup-form__3B7tC\"};","import firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport 'firebase/auth'\n\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAn_CPdVlTDNwyOff2VN2f04HS-xLxBI5U\",\n  authDomain: \"finance-tracker-9f454.firebaseapp.com\",\n  projectId: \"finance-tracker-9f454\",\n  storageBucket: \"finance-tracker-9f454.appspot.com\",\n  messagingSenderId: \"684208187283\",\n  appId: \"1:684208187283:web:cd580540d3c967fb272a66\"\n};\n\n\nconsole.log(\"init firebase run\")\n\n// init firebase\nfirebase.initializeApp(firebaseConfig)\n\n// init services\nconst db = firebase.firestore()\nconst auth = firebase.auth()\n\n// timestamp\nconst timestamp = firebase.firestore.Timestamp\n\nexport { db, auth, timestamp }","import { createContext, useEffect, useReducer} from \"react\";\nimport {auth} from '../firebase/config'\n\nconst init ={ \n    user: null,\n    authIsReady: false,\n    name:''\n}\n\nexport const authReducer = (state, action) => {\n    switch (action.type) {\n      case 'LOGIN':\n        return { ...state, user: action.payload }\n      case 'LOGOUT':\n        return { ...state, user: null }\n      case 'AUTH_IS_READY':\n        return { user: action.payload, authIsReady: true }\n      default:\n        return state\n    }\n}\n\nexport const AuthContext = createContext(init);\n\nexport const AuthProvider = ({children})=>{\n    const [state,dispatch] = useReducer(authReducer,init)\n    \n    useEffect(() => {\n       //! this is a solution rather than using local storage to store the user\n       //& this context runs every time the page reloads as the state will be cleared\n       //^ so what happens here is each time this function will run to check if we have a user or no\n       //? and we wont render anything till this evaluates\n       const unsub = auth.onAuthStateChanged((user)=>{\n        \n          dispatch({ type: 'AUTH_IS_READY', payload: user })\n          unsub()\n        \n       }) \n       \n    }, []);\n    \n    \n    // console.log('AuthContext state:', state)\n    return (\n        <AuthContext.Provider value={{ ...state, dispatch }}>\n            {children}\n        </AuthContext.Provider>\n    )\n\n}","import { AuthContext } from '../context/AuthContext'\nimport {useContext} from 'react'\n\n\nconst useAuthcontext = () => {\n  const context = useContext(AuthContext);\n    \n    //! this means that we are using it outside the scope of the context\n    if(!context)\n        throw new Error('must be inside the provider ACCESS DENIED')\n  \n  return context\n}\n\nexport default useAuthcontext","import {  useReducer, useEffect, useState } from 'react'\nimport {db,timestamp} from '../firebase/config'\n//! this hook is used to do two things \n//& add new document to a collection \n//& remove document from a collection\n\n//! represents the response we get from firebase\nlet initialState = {\n    document: null,\n    isPending: false,\n    error: null,\n    success: null\n}\n  \nconst firestoreReducer = (state, action) => {\n    switch (action.type) {\n      case 'IS_PENDING':\n        return { isPending: true, document: null, success: false, error: null }\n      case 'ADDED_DOCUMENT':\n        return { isPending: false, document: action.payload, success: true, error: null }\n      case 'DELETED_DOCUMENT':\n        return { isPending: false, document: null, success: true, error: null }\n      case 'ERROR':\n        return { isPending: false, document: null, success: false, error: action.payload }\n      default:\n        return state\n    }\n  }\n\nconst useFirestore = (collection='null') => {\n    const [isCancelled, setIsCancelled] = useState(false)\n    const [response,dispatch] =  useReducer(firestoreReducer, initialState)\n    \n      //! only dispatch is not cancelled\n    const dispatchIfNotCancelled = (action) => {\n        if (!isCancelled) {\n          dispatch(action)\n        }\n    }\n    //! get the collection\n    const currentCollection = db.collection(collection)\n\n\n    \n    const addDocument = async (data) => {\n        dispatch({ type: 'IS_PENDING' })\n        try {\n            const createdAt = timestamp.fromDate(new Date())\n            const addedDocument = await currentCollection.add({...data,createdAt});\n            dispatchIfNotCancelled({ type: 'ADDED_DOCUMENT', payload: addedDocument })\n        } catch (err) {\n            dispatchIfNotCancelled({ type: 'ERROR', payload: err.message })\n        }\n    \n    }\n    \n    const deleteDocument = async (id) => {\n      dispatch({ type: 'IS_PENDING' })\n      try {\n        await currentCollection.doc(id).delete()\n        dispatchIfNotCancelled({ type: 'DELETED_DOCUMENT' })\n      }\n      catch (err) {\n        dispatchIfNotCancelled({ type: 'ERROR', payload: 'could not delete' })\n      }\n    \n    }\n\n    useEffect(() => {\n        return () => setIsCancelled(true)\n    }, [])\n\n\n    return { addDocument, deleteDocument, response }\n\n}\n\nexport default useFirestore","import React, { useState,useEffect } from 'react'\nimport useFirestore from '../hooks/useFirestore'\n\n\nconst TransactionForm = ({uid}) => {\n\n    const [name, setName] = useState('')\n    const [amount, setAmount] = useState('')\n    const { addDocument, deleteDocument, response } = useFirestore('transactions');\n    \n    \n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        await addDocument({name,amount,uid})\n \n    }\n    \n    //! reset the form fields\n    useEffect(() => {\n      if (response.success) {\n        setName('')\n        setAmount('')\n      }\n    }, [response.success])\n    \n    \n    return (\n    <>\n      <h3>Add a Transaction</h3>\n      <form onSubmit={handleSubmit}>\n        <label>\n          <span>Transaction name:</span>\n          <input \n            type=\"text\"\n            required\n            onChange={(e) => setName(e.target.value)} \n            value={name} \n          />\n        </label>\n        <label>\n          <span>Amount ($):</span>\n          <input\n            type=\"number\"\n            required\n            onChange={(e) => setAmount(e.target.value)} \n            value={amount} \n          />\n        </label>\n        <button>Add Transaction</button>\n      </form>\n    </>\n  )\n}\n\nexport default TransactionForm","import useFirestore from '../../hooks/useFirestore'\n\n// styles\nimport styles from './Home.module.css'\n\nexport default function TransactionList({ transactions }) {\n  const { deleteDocument } = useFirestore('transactions')\n\n  return (\n    <ul className={styles.transactions}>\n      {transactions.map((transaction) => (\n        <li key={transaction.id}>\n          <p className={styles.name}>{transaction.name}</p>\n          <p className={styles.amount}>${transaction.amount}</p>\n          <button onClick={() => deleteDocument(transaction.id)}>x</button>\n        </li>\n      ))}\n    </ul>\n  )\n}","import { useEffect, useState, useRef } from \"react\"\nimport {db} from '../firebase/config'\n\n\nconst useCollection = (collection, _query, _orderBy) => {\n    const [documents, setDocuments] = useState([])\n    const [error, setError] = useState(null)\n    \n    //! if we don't use a ref --> infinite loop in useEffect\n    //! _query is an array and is \"different\" on every function call\n    const query = useRef(_query).current\n    const orderBy = useRef(_orderBy).current\n  \n    useEffect(() => {\n        let currentCollection = db.collection(collection)\n\n        if (query) {\n          currentCollection = currentCollection.where(...query)\n        }\n        if (orderBy) {\n          currentCollection = currentCollection.orderBy(...orderBy)\n        }\n\n        const unsubscribe = currentCollection.onSnapshot((snapshot) => {\n          let results = []\n          snapshot.docs.forEach(doc => {\n            results.push({id: doc.id, ...doc.data()})\n          });\n\n          setDocuments(results)\n          setError(null)\n        }, (error) => {\n            console.log(error)\n            setError('could not fetch the data')\n        })\n          \n        //* unsubscribe on unmount\n        return () => unsubscribe()\n    },[collection,query,orderBy])\n    \n    \n    return { documents, error }\n}\n\nexport default useCollection","import React from 'react'\nimport styles from './Home.module.css'\nimport TransactionForm from '../../components/TransactionForm'\nimport useAuthcontext from '../../hooks/useAuthcontext'\nimport TransactionList from './TransactionList'\nimport useCollection from '../../hooks/useCollection'\n\nconst Home = () => {\n  const {user} = useAuthcontext()\n  const { documents, error } = useCollection('transactions', [\"uid\", \"==\", user.uid],['createdAt', 'desc'])\n  console.log(documents)\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.content}>\n        {error && <p>{error}</p>}\n        {documents && <TransactionList transactions={documents}/>}\n      </div>\n      <div className={styles.sidebar}>\n       <TransactionForm uid={user.uid}/>\n      </div>\n    </div>\n  )\n}\n\nexport default Home","import React, { useState } from 'react'\nimport styles from './Login.module.css'\nimport {useLogin} from '../../hooks/useLogin'\n\nconst Login = () => {\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n   const{ login, isPending, error }= useLogin()\n   const handleSubmit = (e) => {\n      e.preventDefault()\n      login(email, password)\n  }\n  \n    return (\n      <form onSubmit={handleSubmit} className={styles['login-form']}>\n        <h2>login</h2>\n        <label>\n          email:\n        </label>\n          <input \n            type=\"email\" \n            onChange={(e) => setEmail(e.target.value)} \n            value={email}\n          />\n        \n        <label>\n          password:\n        </label>\n          <input \n            type=\"password\" \n            onChange={(e) => setPassword(e.target.value)} \n            value={password} \n          />\n        { !isPending && <button className=\"btn\">Login</button> }\n        { isPending && <button className=\"btn\" disabled>loading</button> }\n        { error && <p>{error}</p> }\n\n      </form>\n    )\n}\n\nexport default Login","import { useState, useEffect } from 'react'\nimport {auth} from '../firebase/config'\nimport useAuthcontext from './useAuthcontext'\n\nexport const useLogin = () => {\n  const [isCancelled, setIsCancelled] = useState(false)\n  const [error, setError] = useState(null)\n  const [isPending, setIsPending] = useState(false)\n  const { dispatch } = useAuthcontext()\n\n  const login = async (email, password) => {\n    setError(null)\n    setIsPending(true)\n  \n    try {\n      // login\n      const res = await auth.signInWithEmailAndPassword(email, password)\n        \n      // dispatch login action\n      dispatch({ type: 'LOGIN', payload: res.user })\n\n      if (!isCancelled) {\n        setIsPending(false)\n        setError(null)\n      }\n    } \n    catch(err) {\n      if (!isCancelled) {\n        setError(err.message)\n        setIsPending(false)\n      }\n    }\n  }\n\n  useEffect(() => {\n    return () => setIsCancelled(true)\n  }, [])\n\n  return { login, isPending, error }\n}","import { useEffect, useState } from 'react'\nimport {auth} from '../firebase/config'\nimport useAuthcontext from './useAuthcontext'\n\nconst useSignup = () => {\n    const [error,setError] = useState(null)\n    const [isPending,setIsPending] = useState(false)\n    const [isCancelled, setIsCancelled] = useState(false)\n\n    const {dispatch} = useAuthcontext()\n    \n    const signup = async (email,password,displayName) => {\n        setError(null) //^ reset the error each time we signup\n        setIsPending(true)\n        \n        try {\n            const res = await auth.createUserWithEmailAndPassword(email,password) \n  \n            dispatch({type:'LOGIN',payload:res.user})\n            if(!res){\n                throw new Error('Failed to create a user')\n            }\n            //! after creating the user we want to tap in that user and update his profile and add this name\n            await res.user.updateProfile({ displayName })\n                    \n            if (!isCancelled)\n                 setIsPending(false)\n    \n            \n        } catch (err) {\n            console.log(error)\n            setError(err.message)\n            setIsPending(false)\n\n        }\n        \n    }\n    \n    useEffect(() => {    \n        return () => setIsCancelled(false) //! if we navigate away this fire and we dont want to update the local state if this happens\n    }, []);\n    \n    return {error,isPending,signup}\n}\n\nexport default useSignup","import React, { useState } from 'react'\nimport styles from './Signup.module.css'\nimport useSignup from '../../hooks/useSignup'\n\nconst Signup = () => {\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [displayName, setDisplayName] = useState('')\n    const {error,isPending,signup} = useSignup()\n  \n    const handleSubmit = (e) => {\n      e.preventDefault()\n      signup(email,password,displayName)\n    }\n  \n    return (\n      <form onSubmit={handleSubmit} className={styles['signup-form']}>\n        <h2>sign up</h2>\n        <label>\n          <span>email:</span>\n        </label>\n          <input \n            type=\"email\" \n            onChange={(e) => setEmail(e.target.value)} \n            value={email}\n           />\n        \n        <label>\n          <span>password:</span>\n        </label>\n          <input \n            type=\"password\" \n            onChange={(e) => setPassword(e.target.value)} \n            value={password} \n          />\n        <label>\n          <span>display name:</span>\n          <input \n            type=\"text\" \n            onChange={(e) => setDisplayName(e.target.value)}\n            value={displayName}\n          />\n        </label>\n        { !isPending && <button className=\"btn\">sign up</button> }\n        { isPending && <button className=\"btn\" disabled>loading</button> }\n        { error && <p>{error}</p> }\n      </form>\n    )\n}\n\nexport default Signup","import { useEffect, useState } from 'react'\nimport { auth } from '../firebase/config'\nimport useAuthcontext from './useAuthcontext'\n\nconst useLogout = () => {\n  const [isCancelled, setIsCancelled] = useState(false)\n  const [error, setError] = useState(null)\n  const [isPending, setIsPending] = useState(false)\n  const {dispatch} = useAuthcontext()\n\n    \n  const logout = async () => {\n    setError(null)\n    setIsPending(true)\n\n    try {\n        await auth.signOut()\n        dispatch({type:'LOGOUT'})\n\n        \n        if (!isCancelled)\n            setIsPending(false)\n        \n        \n    }catch (err) {\n        console.log(error)\n        setError(err.message)\n        setIsPending(false)\n    }\n    \n  }\n\n    useEffect(() => {    \n        return () => setIsCancelled(false) //! if we navigate away this fire\n    }, []);\n \n\n  return { logout, error, isPending }\n\n}\n\nexport default useLogout","import React from 'react'\nimport { Link } from \"react-router-dom\"\nimport styles from './Navbar.module.css'\nimport useAuthcontext from '../hooks/useAuthcontext'\nimport useLogout from '../hooks/useLogout'\n\nconst Navbar = () => {\n  const {user} = useAuthcontext()\n  const {logout} = useLogout()\n\n  return (\n    <nav className={styles.navbar}>\n      <ul>\n        <li className={styles.title}><Link to=\"/\">My money</Link></li>\n    \n    {!user && (\n      <>\n        <li><Link to=\"/login\">Login</Link></li>\n        <li><Link to=\"/signup\">Signup</Link></li>\n      </>\n    )}\n    \n\n       \n      {user && (\n          <>\n            <li>hello, {user?.displayName}</li>\n            <li>\n              <button className=\"btn\" onClick={logout}>Logout</button>\n            </li>\n          </>\n        )}\n      \n      </ul>\n    </nav>\n  )\n}\n\nexport default Navbar","\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom'\nimport useAuthcontext from './hooks/useAuthcontext'\n\n\n\nimport Home from './pages/home/Home'\nimport Login from './pages/login/Login'\nimport Signup from './pages/signup/Signup'\nimport Navbar from './components/Navbar.jsx'\n\nfunction App() {\n  const {user,authIsReady} = useAuthcontext()\n\n  return (\n    <div className=\"App\">\n{      authIsReady &&( <BrowserRouter>\n        <Navbar />\n          <Switch>\n          \n            <Route exact path=\"/\">\n             {user ? <Home /> :<Redirect to=\"/login\" />}\n            </Route>\n            \n            <Route exact path=\"/login\">\n             {!user && <Login />}\n             {user && <Redirect to=\"/\" />}\n            </Route>\n            \n            <Route exact path=\"/signup\">\n             {!user ? <Signup /> :<Redirect to=\"/\" />}\n            </Route>\n            \n          </Switch>\n      </BrowserRouter>)}\n    </div>\n  );\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {AuthProvider} from './context/AuthContext';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthProvider>\n      <App />\n    </AuthProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}